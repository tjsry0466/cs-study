# AWS 네트워크

AWS 네트워크는 Amazon Virtual Private Cloud(VPC)를 중심으로 작동하며, 다양한 네트워크 관련 서비스 및 기능을 제공하여 클라우드 인프라의 네트워크 설정을 매우 유연하고 안전하게 관리할 수 있도록 지원합니다.

1. VPC(Virtual Private Cloud)

- VPC 개념: VPC는 사용자가 정의한 가상 네트워크로, AWS 클라우드 내에서 격리된 네트워크 환경을 구축할 수 있습니다. 각 VPC는 독립된 IP 주소 공간을 갖고, 네트워크 구성 및 보안 규칙을 사용자 정의할 수 있습니다.
- VPC의 CIDR: VPC는 사용자가 정의한 IP 주소 범위인 CIDR 블록(Classes Inter-Domain Routing)으로 구성됩니다. 예를 들어, 10.0.0.0/16과 같은 주소 범위를 선택할 수 있으며, 이 범위 내에서 서브넷을 나누어 사용할 수 있습니다.

2. 서브넷 (Subnet)

- 퍼블릭 서브넷과 프라이빗 서브넷
  - 퍼블릭 서브넷: 인터넷 게이트웨이(IGW)에 연결되어 있어, 인터넷과 직접 통신할 수 있는 리소스를 배치합니다. 주로 웹 서버, 로드 밸런서 등 외부와 통신이 필요한 리소스를 여기에 배치합니다.
  - 프라이빗 서브넷: 인터넷에 직접 노출되지 않는 서브넷으로, 데이터베이스, 백엔드 서버 등 외부 접근이 필요 없는 리소스를 배치합니다. 프라이빗 서브넷에서 외부로 나가는 트래픽은 NAT 게이트웨이를 통해서만 가능합니다.
- 가용 영역(AZ): VPC는 여러 가용 영역(AWS 리전 내 분리된 데이터센터들)에 서브넷을 배치할 수 있으며, 이를 통해 고가용성을 보장합니다.

3. 인터넷 게이트웨이 (Internet Gateway)

- 역할: 퍼블릭 서브넷에 있는 리소스가 인터넷과 통신할 수 있도록 트래픽을 중계하는 역할을 합니다. VPC에 인터넷 게이트웨이(IGW)를 연결하여 퍼블릭 서브넷과 인스턴스가 인터넷에 접근할 수 있게 만듭니다.

4. NAT 게이트웨이 (Network Address Trnslation Gateway)

- 역할: 프라이빗 서브넷의 인스턴스가 인터넷에 직접 노출되지 않고, 외부 인터넷과 통신할 수 있게 중계해주는 역할을 합니다. NAT 게이트웨이를 사용하면 인스턴스는 외부에서 시작된 요청에 대해서는 접근을 허용하지 않으면서도 필요한 경우 외부로 요청을 보낼 수 있습니다.
- NAT 인스턴스와 차이점: NAT 인스턴스는 EC2 인스턴스를 NAT로 사용한 것이고, NAT 게이트웨이는 AWS에서 관리하는 고가용성 서비스로, 성능 및 확장성 면에서 더 우수합니다.

5. 라우팅 테이블 (Routing Table)

- 라우팅 테이블의 역할: 서브넷 내 트래픽이 어디로 라우팅될지를 결정합니다. 라우팅 테이블은 특정 IP 주소 범위로 향하는 트래픽이 VPC 내에 남을지, 인터넷으로 나갈지, 다른 VPC로 이동할지 등의 경로를 정의합니다.
  - 예: 퍼블릿 서브넷의 라우팅 테이블에는 인터넷 게이트웨이를 통해 외부로 나가는 경로가 포함되고, 프라이빗 서브넷은 NAT 게이트웨이를 통해 외부로 나가도록 설정합니다.

6. VPC 피어링 (VPC Peering)

- 역할: 동일 리전 또는 다른 리전에 있는 두 VPC 간에 트래픽을 주고받을 수 있도록 하는 기능입니다. VPC 피어링을 사용하면 서로 다른 VPC에 있는 리소스들이 안전하게 통신할 수 있으며, 인터넷을 거치지 않기 때문에 데이터 전송 비용도 절감됩니다.

7. AWS Transit Gateway

- 역할: 여러 VPC와 온프레미스 네트워크를 중앙에서 관리하고 연결하는 네트워크 허브 역할을 합니다. 대규모 네트워크 환경에서 여러 VPC를 효율적으로 연결하는 데 매우 유용하며, 트래픽 라우팅과 네트워크 관리를 쉽게 할 수 있습니다.
- 장점: 다수의 VPC를 연결하는 복잡한 환경에서 피어링보다 확장성이 높고, 네트워크 중앙 관리 포인트를 제공합니다.

8. VPC 엔드포인트 (VPC Endpoint)

- 인터페이스 엔드포인트: AWS 서비스(S3, DynamoDB 등)와의 통신을 인터넷을 거치지 않고 VPC 내에서 할 수 있도록 합니다. 보안을 강화하고 네트워크 트래픽 비용을 줄일 수 있습니다.
- 게이트웨이 엔드포인트: S3와 DynamoDB와의 통신을 위한 전용 엔드포인트로, 퍼블릭 인터넷을 통하지 않고 안전한 내부 네트워크에서만 데이터를 전송합니다.

9. 보안 그룹 (Security Group)

- 역할: 보안 그룹은 EC2 인스턴스 등의 리소스에 대해 인바운드 및 아웃바운드 트래픽을 제어하는 가상 방화벽 역할을 합니다. 스테이풀(stateful) 방식을 사용하므로 인바운드 요청을 허용하면 해당 응답 트래픽은 자동으로 허용됩니다.
- 설계 방법: 최소 권한의 원칙을 따르며, 꼭 필요한 트래픽만 허용하도록 설정합니다.

11. 네트워크 ACL (NACL)

- 역할: 서브넷 레벨에서 네트워크 트래픽을 제어하는 보안 규칙 집합입니다. 네트워크 ACL은 스테이트리스(stateless)방식으로 작동하므로 인바운드와 아웃바운드 트래픽을 각각 명시적으로 정의해야 합니다.
- 보안 그룹과의 차이: 보안 그룹은 특정 인스턴스에 적용되고, NACL은 서브넷 레벨에서 적용되어 여러 인스턴스를 동시에 보호할 수 있습니다.

12. Elastic IP (EIP)

- Elastic IP는 고정된 퍼블릭 IP 주소로, 인스턴스가 중단되거나 장애가 발생해도 해당 IP를 다른 인스턴스에 연결할 수 있습니다. 이는 고정 IP가 필요한 어플리케이션이나 서비스에 유용합니다.

13. Route 53

- DNS 서비스: Route 53은 AWS의 DNS 웹 서비스로, 도메인 이름을 IP 주소와 매핑해주는 역할을 합니다. 글로벌 DNS 라우팅 기능을 제공하여 여러 리전에 걸친 트래픽을 효율적으로 관리하고 고가용성을 제공합니다.
- 헬스 체크 및 장애 조치: Route 53은 헬스 체크 기능을 통해 서비스 상태를 모니터링하고, 장애 발생 시 트래픽을 다른 리전이나 인스턴스로 자동으로 전환할 수 있습니다.

14. AWS Global Accelerator

- 역할: Global Accelerator는 글로벌 어플리케이션의 성능과 가용성을 향상시키는 서비스로, 사용자가 가장 가까운 AWS 엣지 로케이션을 통해 트래픽을 라우팅합니다. 지연 시간이 줄어들고, 자동 장애 조치(failover)가 제공되어 글로벌 서비스에 유용합니다.

15. CloudFront

- 콘텐츠 전송 네트워크(CDN): CloudFront는 전 세계의 엣지 로케이션을 통해 정적 및 동적 콘텐츠를 제공하는 CDN 서비스입니다. 콘텐츠를 사용자에게 가장 가까운 서버에서 제공하므로 응답 속도가 빨라지고 네트워크 부하도 줄어듭니다.
