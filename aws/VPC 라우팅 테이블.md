# VPC 라우팅 테이블

AWS의 라우팅 테이블은 VPC내에서 트래픽이 어디로 향해야 하는지를 결정하는 중요한 네트워크 구성 요소입니다. 각 서브넷은 라우팅 테이블을 참조하여, 서브넷 내부에서 발생하는 트래픽이 외부로 나가거나 다른 서브넷이나 서비스로 전달될 떄의 경로를 정의합니다.

1. 라우팅 테이블의 구성 요소

라우팅 테이블은 목적지와 대상이라는 두 가지 중요한 요소로 구성됩니다.

- Destination (목적지): 이 필드는 트래픽이 향하는 IP 주소나 CIDR 범위를 나타냅니다. 예를 들어 0.0.0.0/0은 모든 트래픽을 의미합니다. 특정 IP 대역만을 지정할 수도 있습니다.
- 트래픽이 향하는 대상입니다. 예를 들어, 인터넷 게이트웨이(IGW), NAT 게이트웨이, VPC 엔드포인트, VPC 피어링 연결 등이 될 수 있습니다. 즉, 트래픽이 어디로 전달되어야 하는지를 정의합니다.

2. 라우팅 테이블의 동작 방식

라우팅 테이블은 서브넷에서 발생하는 트래픽이 어디로 전달되어야 할지 결정합니다. 서브넷 내부의 인스턴스가 트래픽을 설정하면, 라우팅 테이블을 통해 트래픽의 목적지에 따라 경로가 설정됩니다.

AWS VPC에는 기본적으로 메인 라우팅 테이블이 존재하며, 모든 서브넷은 기본적으로 이 메인 라우팅 테이블을 사용합니다. 하지만 필요한 경우 커스텀 라우팅 테이블을 생성하여 특정 서브넷에 맞는 트래픽 경로를 정의할 수 있습니다.

3. 라우팅 테이블의 대상

라우팅 테이블은 다양한 대상을 통해 트래픽을 전다랗ㅂ니다. 일반적으로 사용되는 주요 대상은 다음과 같습니다.

- 인터넷 게이트웨이 (IGW): 퍼블릭 서브넷에서 외부 인터넷과 연결될 떄 사용됩니다. 인터넷으로 나가는 트래픽은 IGW를 통해 전달됩니다.
- NAT 게이트웨이: 프라이빗 서브넷이 외부 인터넷으로 나갈 때 사용하는 경로이니다. 프라이빗 서브넷의 트래픽이 직접 인터넷으로 나가는 대신 NAT 게이트웨이를 통해 외부로 전달됩니다.
- VPC 피어랑 (VPC Peering): 다른 VPC와 연결된 네트워크를 경유하여 트래픽을 전달합니다.
- VPC 엔드포인트: VPC 내에서 S3, DynamoDB 같은 AWS 서비스에 연결할 때 인터넷을 거치지 않고 내부 네트워크를 통해 안전하게 트래픽을 전달합니다.
