# CAP 이론

CAP 이론은 분산 시스템에서 세 가지 주요 특성을 설명하는 이론입니다. 이 세 가지 특성은 **Consistency(일관성)**, **Availability(가용성)**, **Partition Tolerance**(파티션 내성)입니다. CAP 이론은 이 세 가지 특성 중에서 동시에 두 가지만을 보장할 수 있다고 주장합니다. 각 특성을 간단히 설명하겠습니다.

## CAP 이론의 세 가지 요소

1. **Consistency (일관성)**

   - 모든 노드에서 같은 시간에 동일한 데이터를 볼 수 있는 특성입니다.
   - 즉, 시스템 내의 모든 사용자가 동시에 동일한 데이터를 읽을 수 있도록 보장합니다.

2. **Availability (가용성)**

   - 모든 요청에 대해 항상 응답을 받을 수 있는 특성입니다.
   - 시스템이 항상 사용 가능하며, 사용자가 데이터를 요청했을 때 반드시 응답을 받을 수 있도록 보장합니다.

3. **Partition Tolerance (파티션 내성)**
   - 시스템이 네트워크 파티션(통신 장애) 상황에서도 계속 동작할 수 있는 특성입니다.
   - 네트워크가 분할되어 일부 노드 간 통신이 불가능해도 시스템이 운영될 수 있어야 합니다.

## CAP 이론의 트레이드오프

CAP 이론에 따르면, 세 가지 특성 중 두 가지를 선택하면 나머지 하나는 포기해야 합니다. 각 조합의 예시는 다음과 같습니다:

- **CP 시스템 (Consistency + Partition Tolerance)**

  - 네트워크 파티션이 발생하면 시스템은 일관성을 유지하기 위해 가용성을 포기할 수 있습니다. 즉, 시스템은 일부 요청에 대해 응답하지 않을 수 있습니다.
  - 예: HBase, MongoDB (강력한 일관성을 보장하는 설정에서)

- **AP 시스템 (Availability + Partition Tolerance)**

  - 네트워크 파티션이 발생해도 시스템은 가용성을 유지하기 위해 일관성을 포기할 수 있습니다. 즉, 시스템이 일시적으로 일관되지 않은 데이터를 제공할 수 있습니다.
  - 예: Cassandra, Couchbase

- **CA 시스템 (Consistency + Availability)**
  - 이 조합은 네트워크 파티션이 발생하지 않는 환경에서만 가능합니다. 하지만, 네트워크 파티션을 무시할 수 없기 때문에 실제 분산 시스템에서는 거의 사용되지 않습니다.
  - 예: 단일 노드 RDBMS (분산 시스템이 아닌 경우)

## 결론

CAP 이론은 분산 시스템 설계에서 일어날 수 있는 다양한 트레이드오프를 이해하는 데 중요한 역할을 합니다. 개발자는 특정 시스템 요구사항에 맞게 어떤 특성을 우선시할 것인지를 결정해야 합니다. 이 이론은 분산 시스템의 복잡성을 이해하고 적절한 아키텍처를 선택하는 데 도움이 됩니다.
